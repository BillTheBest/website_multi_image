<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <template id="website.theme_chd_misc" name="theme_chd_misc" inherit_id="website.theme" priority="1">
          <xpath expr="//link[last()]" position="after">
            <link href="/website_multi_image/static/css/owlcarousel/owl.carousel.css" rel="stylesheet" />
            <link href="/website_multi_image/static/css/owlcarousel/owl.theme.css" rel="stylesheet" />
            <link href="/website_multi_image/static/css/owlcarousel/owl.transitions.css" rel="stylesheet" />
          </xpath>
        </template>
        <template id="clean_script" inherit_id="website.assets_frontend" name="Clean scripts">
          <xpath expr="/t" position="inside">
            <script type="text/javascript" src="/website_multi_image/static/js/owlcarousel/owl.carousel.js" data-no-instant=""></script>
            <script type="text/javascript">
		jQuery(document).ready(function ($) {

			var $sync1 = $(".big-images"),
				$sync2 = $(".thumbs"),
				flag = false,
				duration = 300;

			$sync1
				.owlCarousel({
					items: 1,
					margin: 10,
					nav: true,
					dots: true
				})
				.on('changed.owl.carousel', function (e) {
					if (!flag) {
						flag = true;
						$sync2.trigger('to.owl.carousel', [e.item.index, duration, true]);
						flag = false;
					}
				});

			$sync2
				.owlCarousel({
					margin: 20,
					items: 6,
					nav: true,
					center: true,
					dots: true
				})
				.on('click', '.owl-item', function () {
					$sync1.trigger('to.owl.carousel', [$(this).index(), duration, true]);

				})
				.on('changed.owl.carousel', function (e) {
					if (!flag) {
						flag = true;		
						$sync1.trigger('to.owl.carousel', [e.item.index, duration, true]);
						flag = false;
					}
				});
		});
	</script>
          </xpath>
        </template>
    </data>
</openerp>
